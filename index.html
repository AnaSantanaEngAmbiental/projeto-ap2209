<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AP 2209">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2942/2942544.png">
    
    <title>AP 2209 - MASTER V18</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; font-size: 10px; }
        .tab-active { background-color: #1e40af !important; color: white !important; transform: scale(1.02); }
        .header-master { background: #0f172a; border-bottom: 4px solid #2563eb; border-radius: 0 0 24px 24px; }
        .card-ponto { border-left: 6px solid #2563eb; border-radius: 16px; padding: 18px; background: white; margin-bottom: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .memorial-section { border-left: 5px solid #1e40af; background: white; padding: 20px; border-radius: 16px; margin-bottom: 15px; }
        .tag-cor { padding: 4px 10px; border-radius: 6px; color: white; font-weight: 900; font-size: 8px; text-transform: uppercase; border: 1px solid rgba(0,0,0,0.1); display: inline-block; }
        
        /* Ajuste do QR Code para nÃ£o atrapalhar */
        #qr-sidebar {
            position: fixed; top: 120px; right: 20px; width: 160px;
            background: white; padding: 15px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15); border: 2px solid #e2e8f0;
            z-index: 1000; transition: all 0.3s ease;
        }
        .qr-hidden { transform: translateX(130px); opacity: 0.5; }
        .qr-hidden:hover { transform: translateX(0); opacity: 1; }

        @media (max-width: 1024px) {
            #qr-sidebar { position: static; width: 100%; margin-top: 20px; border: none; box-shadow: none; text-align: center; }
            .qr-hidden { transform: none; opacity: 1; }
        }
    </style>
</head>
<body class="pb-24">

    <div id="qr-sidebar" class="no-print">
        <div class="flex justify-between items-center mb-2">
            <span class="text-[8px] font-black uppercase text-slate-400">Acesso Mobile</span>
            <button onclick="document.getElementById('qr-sidebar').classList.toggle('qr-hidden')" class="text-blue-600 font-bold text-[10px]">[-] </button>
        </div>
        <div id="qrcode" class="flex justify-center mb-3"></div>
        <button onclick="shareLink()" class="w-full bg-emerald-500 text-white py-2 rounded-lg font-black text-[8px] uppercase flex items-center justify-center gap-1 shadow-md active:scale-95 transition-all">
            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
            WhatsApp
        </button>
    </div>

    <header class="header-master text-white p-6 mb-6 shadow-2xl mx-1">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-black italic tracking-tighter text-blue-400 uppercase leading-none">AP 2209 MASTER</h1>
                <p class="text-[8px] font-bold uppercase tracking-[0.4em] opacity-60 mt-3">CÃ¡lculo de Pontos e Metragens â€¢ 2026</p>
            </div>
            <div class="flex gap-6">
                <div class="text-right border-r border-slate-700 pr-6">
                    <p class="text-[7px] font-black text-slate-400 uppercase">Investimento</p>
                    <p id="total-geral" class="text-lg font-mono font-bold">R$ 5.932,90</p>
                </div>
                <div class="text-right">
                    <p class="text-[7px] font-black text-emerald-400 uppercase">Comprado</p>
                    <p id="total-pago" class="text-lg font-mono font-bold text-emerald-400">R$ 668,40</p>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-6xl mx-auto px-4">
        
        <nav class="flex gap-2 mb-6 no-print overflow-x-auto pb-2">
            <button onclick="switchTab('planilha')" id="btn-planilha" class="flex-1 min-w-[120px] py-4 rounded-2xl font-black text-[9px] uppercase bg-white text-slate-400 shadow-sm tab-active">1. OrÃ§amento Ativo</button>
            <button onclick="switchTab('eletrica')" id="btn-eletrica" class="flex-1 min-w-[120px] py-4 rounded-2xl font-black text-[9px] uppercase bg-white text-slate-400 shadow-sm">2. Memorial TÃ©cnico</button>
            <button onclick="switchTab('pontos')" id="btn-pontos" class="flex-1 min-w-[120px] py-4 rounded-2xl font-black text-[9px] uppercase bg-white text-slate-400 shadow-sm">3. Mapa de Pontos</button>
        </nav>

        <div id="view-eletrica" class="hidden space-y-4">
            <div class="bg-slate-900 text-white p-6 rounded-[24px] border-b-4 border-blue-600 shadow-xl">
                <h3 class="text-blue-400 font-black text-[10px] uppercase mb-2">Regra de Ouro AP 2209:</h3>
                <p class="italic text-[12px] font-serif leading-relaxed">"ConexÃµes em Wago 221 e terminais ilhÃ³s com crimpagem hexagonal em todo o sistema."</p>
            </div>

            <div class="memorial-section">
                <h3 class="font-black text-blue-700 mb-4 uppercase text-[11px] border-b pb-2">Diretrizes de InstalaÃ§Ã£o</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-slate-50 p-4 rounded-xl">
                        <p class="font-black text-[8px] uppercase text-slate-500 mb-2">IdentificaÃ§Ã£o Prysmian:</p>
                        <div class="space-y-1 text-[10px] font-bold">
                            <div class="flex justify-between"><span>FASE R/S/T:</span> <span class="text-slate-900 uppercase">Preto/Verm/Branco</span></div>
                            <div class="flex justify-between text-blue-600"><span>NEUTRO:</span> <span>Azul</span></div>
                            <div class="flex justify-between text-emerald-600"><span>TERRA:</span> <span>Verde</span></div>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 text-[9px] leading-relaxed text-blue-800 italic">
                        <strong>PROTEÃ‡ÃƒO SCHNEIDER:</strong> Uso obrigatÃ³rio de DR 30mA e DPS Classe II 275V 20kA. Crimpagem Hexagonal obrigatÃ³ria em todos os bornes.
                    </div>
                </div>
            </div>
        </div>

        <div id="view-pontos" class="hidden space-y-4">
            <h2 class="text-xs font-black uppercase border-b-4 border-blue-600 pb-2 mb-6 italic tracking-tighter">Engenharia de Pontos</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="card-ponto">
                    <p class="font-black text-[12px] text-red-600 uppercase mb-3">ðŸš¿ Chuveiro Master</p>
                    <div class="text-[9px] font-bold text-slate-600 space-y-1">
                        <p>6,0mmÂ² | 40A | ~45 metros totais</p>
                        <p class="text-[7px] bg-red-50 p-2 rounded text-red-700 uppercase italic">Fases R+S (220V) - Sem Neutro</p>
                    </div>
                </div>

                <div class="card-ponto" style="border-left-color: #f97316;">
                    <p class="font-black text-[12px] text-orange-600 uppercase mb-3">ðŸ”¥ Torre Quente (220V)</p>
                    <div class="text-[9px] font-bold text-slate-600 space-y-1">
                        <p>4,0mmÂ² | Tomadas 20A | ~36 metros total</p>
                        <p class="text-[7px] bg-orange-50 p-2 rounded text-orange-700 uppercase italic">Incluso: MÃ¡quina Lava-louÃ§a, Forno e Micro-ondas</p>
                    </div>
                </div>

                <div class="card-ponto" style="border-left-color: #fbbf24;">
                    <p class="font-black text-[12px] text-amber-500 uppercase mb-3">ðŸ’¡ IluminaÃ§Ã£o Geral</p>
                    <p class="text-[9px] font-bold text-slate-600">1,5mmÂ² | ~120 metros total</p>
                </div>

                <div class="card-ponto" style="border-left-color: #64748b;">
                    <p class="font-black text-[12px] text-slate-700 uppercase mb-3">ðŸ”Œ Tomadas TUG (10A)</p>
                    <p class="text-[9px] font-bold text-slate-600">2,5mmÂ² | ~180 metros total</p>
                </div>
            </div>

            <div class="bg-amber-50 border-l-4 border-amber-400 p-4 rounded-xl">
                <p class="text-[9px] text-amber-900 leading-relaxed font-bold italic">
                    Nota tÃ©cnica: As metragens calculam o trajeto ida/volta pelo eletroduto + 30cm de sobra em cada caixa para a crimpagem hexagonal dos terminais.
                </p>
            </div>
        </div>

        <div id="view-planilha" class="space-y-4">
            <div id="inventory-body" class="bg-white rounded-[32px] shadow-xl border border-slate-200 p-4">
                </div>
        </div>
    </div>

    <script>
        // Dados recuperados das imagens
        let inventory = [
            { id: 1, desc: "Cabo Prysmian 6,0mmÂ² (Preto/Verm/Verde)", qty: 45, price: 9.80, cat: "Elet", bought: false },
            { id: 2, desc: "Cabo Prysmian 4,0mmÂ² (Verm/Branco/Verde)", qty: 36, price: 6.50, cat: "Elet", bought: false },
            { id: 3, desc: "Cabo Prysmian 2,5mmÂ² (R/S/T + N + T)", qty: 180, price: 4.50, cat: "Elet", bought: true },
            { id: 7, desc: "IDR Schneider 4P 40A 30mA", qty: 1, price: 295.00, cat: "Elet", bought: false },
            { id: 8, desc: "DPS Schneider 20kA 275V", qty: 3, price: 145.00, cat: "Elet", bought: false },
            { id: 11, desc: "Caixa 4x4 Amarela", qty: 12, price: 7.80, cat: "Infra", bought: true },
            { id: 12, desc: "Caixa 4x2 Amarela", qty: 22, price: 4.80, cat: "Infra", bought: true }
        ];

        function render() {
            const body = document.getElementById('inventory-body');
            body.innerHTML = inventory.map(item => `
                <div class="flex justify-between items-center border-b p-3 ${item.bought ? 'opacity-30 line-through' : ''}">
                    <div>
                        <div class="font-black uppercase text-[10px]">${item.desc}</div>
                        <span class="text-[7px] font-bold text-blue-600 uppercase">${item.cat}</span>
                    </div>
                    <div class="font-mono font-bold">R$ ${(item.qty * item.price).toFixed(2)}</div>
                </div>
            `).join('');
        }

        function switchTab(t) {
            ['planilha', 'eletrica', 'pontos'].forEach(tab => {
                document.getElementById('view-' + tab).classList.toggle('hidden', t !== tab);
                document.getElementById('btn-' + tab).classList.toggle('tab-active', t === tab);
            });
        }

        function shareLink() {
            navigator.clipboard.writeText(window.location.href);
            alert("Link copiado! Agora Ã© sÃ³ colar no WhatsApp do seu eletricista.");
        }

        window.onload = function() {
            new QRCode(document.getElementById("qrcode"), {
                text: window.location.href,
                width: 120, height: 120,
                colorDark : "#0f172a", colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });
            render();
        };
    </script>
</body>
</html>
